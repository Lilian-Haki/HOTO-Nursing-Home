<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />

  <!-- bootstrap -->
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/css/bootstrap.min.css" rel="stylesheet"
    integrity="sha384-BmbxuPwQa2lc/FVzBcNJ7UAyJxM6wuqIj61tLrc4wSX0szH/Ev+nYRRuWlolflfl" crossorigin="anonymous" />

  <!-- datatables -->
  <link href="https://cdn.datatables.net/1.10.24/css/jquery.dataTables.min.css" rel="stylesheet" />

  <!-- bootsnipp home cards stuff -->
  <link href="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/css/bootstrap.min.css" rel="stylesheet"
    id="bootstrap-css" />
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.1.1/js/bootstrap.min.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jquery/3.2.1/jquery.min.js"></script>

  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.css" />
  <link rel="stylesheet" href="/static/css/home_cards.css" />
  <link rel="stylesheet" href="/static/css/styles.css" />
  <link rel="stylesheet" href="/static/css/style.css">
  <link rel="stylesheet" href="/static/css/about.css">

  <!-- fullcalendar -->
  <script src="https://cdn.jsdelivr.net/npm/fullcalendar@5.8.0/main.min.js"
    integrity="sha256-AOrsg7pOO9zNtKymdz4LsI+KyLEHhTccJrZVU4UFwIU=" crossorigin="anonymous"></script>

  <meta charset='utf-8' />
  <link href='fullcalendar/main.css' rel='stylesheet' />
  <script src='fullcalendar/main.js'></script>
  <script>

    document.addEventListener('DOMContentLoaded', function () {
      var calendarEl = document.getElementById('calendar');
      var calendar = new FullCalendar.Calendar(calendarEl, {
        initialView: 'dayGridMonth'
      });
      calendar.render();
    });

  </script>
 <script>
  function printDiv() {
    var divContents = document.getElementById("GFG").innerHTML;
    var a = window.open('', '', 'height=500, width=500');
    a.document.write('<table>');
    a.document.write('<h3><u>Receipt</u><br>');
    a.document.write(divContents);
    a.document.write("</table>");

    a.document.write("Thank you for trusting us with your loved ones");
    a.document.close();
    a.print();
  }
</script>

  <title>House Of The Old</title>
</head>

<body>
  <div class="containe">
    <nav class="navbar navbar-expand-lg navbar-light bg-light">
      <div class="container-fluid">
        <a class="navbar-brand" href="/" style="font-weight: 800; font-size: 24px;">House <span
            style="color: rgb(146, 31, 31);">OF THE OLD</style></a>
        <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarNav"
          aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation">
          <span class="navbar-toggler-icon"></span>
        </button>
        <div class="collapse navbar-collapse" id="navbarNav">
          <ul class="navbar-nav">
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('dashboard')}}">Home</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('patients')}}">Patients</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('visitor')}}">Visitors</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('doctors')}}">Medical Staff</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('appointments')}}">Appointments</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('charges')}}">Charges</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('inventory')}}">Inventory</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('guardian')}}">Guardians</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('help')}}">Help</a>
            </li>
            <li class="nav-item">
              <a class="nav-link active link-button m-2" aria-current="page" href="{{url_for('about')}}">About us</a>
            </li>
            <li>
              <div class="dropdown">
              <button class="dropbtn">reports</button>
              <div class="dropdown-content">
                <a href="{{url_for('pat_range')}}">Patient report</a>
                <a href="{{url_for('vis_range')}}">Visitor report</a>

              </div>
            </div></li>

          </ul>
        </div>
        <div>
          {% if logged_in %}
           <i class="fas"> Signed in as: {{ first_name }} {{ last_name }}</i>
          {% endif %}
        </div>
        <div><a class="nav-link active btn btn-info text-light link-button m-2 me-auto" aria-current="page" href="{{url_for('logout')}}">Log Out</a>
        </div>
      </div>
    </nav>
  </div>

  <div class="container">
    <!-- Button trigger modal -->
    <button type="button" class="btn btn-primary mb-3 mt-3" data-bs-toggle="modal" data-bs-target="#exampleModal">
        ADD BILL
    </button>

    <!-- Modal -->
    <div class="modal fade" id="exampleModal" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Register Patient</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="/bill" method="POST" >
                        <fieldset>
                            <div class="dropdown">
                                <label for="">Choose service or product Offered</label>
                                <select name="service_offered">
                                  {% for inventor in inventory %}
                                  <option value="{{inventor.name}}">
                                    {{inventor.name}} - {{inventor.selling_price}} 
                                  </option>
                                  {% endfor %}
                                </select>
                              </div>
                            
                            <hr class="colorgraph">
                            <div class="row">
                                <div class="col-xs-6 col-sm-6 col-md-6">
                                    <input type="submit" class="btn btn-lg btn-success btn-block" value="ADD BILL">
                                </div>
                                
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>
    <button type="button" class="btn btn-primary mb-3 mt-3" data-bs-toggle="modal" data-bs-target="#exampleModal1">
        PAY BILL
    </button>
   
    <!-- Modal -->
    <div class="modal fade" id="exampleModal1" tabindex="-1" aria-labelledby="exampleModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="exampleModalLabel">Register Patient</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form action="/paybill" method="POST" >
                        <fieldset>
                            <h2>ADD BILL</h2>
                            <hr class="colorgraph">
                            <div class="form-group">
                                <input type="text" name="service_offered" id="name" class="form-control input-lg"
                                     value="Paid">
                            </div>
                            <div class="form-group">
                                <input type="number" name="cost" id="cost" class="form-control input-lg"
                                    placeholder="Amount PAID" required>
                            </div>
                            
                            <hr class="colorgraph">
                            <div class="row">
                                <div class="col-xs-6 col-sm-6 col-md-6">
                                    <input type="submit" class="btn btn-lg btn-success btn-block" value="ADD BILL">
                                </div>
                                
                            </div>
                        </fieldset>
                    </form>
                </div>
            </div>
        </div>
    </div>

    <!-- this is the code for the table -->
    <div id="GFG">
      {% for patient_val in patient %}
      <br>
      Patients name: {{patient_val.first_name}} {{patient_val.last_name}}<br>
      Customer email: {{patient_val.address}}<br>
      Customer contact: {{patient_val.telephone}}<br>
      Under care of: {{patient_val.guardian_name}}
      {% endfor %}
      

    <table border="1px"id="myTable" class="table">
        <thead>
            <tr>
                <th scope="col">Service Offered</th>
                <th scope="col">Cost</th>
                <th scope="col">Paid at</th>
              
            </tr>
        </thead>
        <tbody>
            {% for charge in charges %}
            <tr>
                <td>{{charge.service_offered}}</td>
                <td>{{charge.cost}}</td>
                <td>{{charge.time_of_offering}}</td>
               
              
                
            </tr>
            {% endfor %}
        </tbody>
    </table>
    <div class="col-md-3">
        <div class="card-counter success">
          <i class="fa fa-users"></i>
          <span class="count-name">BALANCE</span>
          <span class="count-numbers">KSH: {{ total_cost }}</span>
          
        </div>
      </div>
</div>
</div>

<div class="container">
  <div class="row">
      <div class="col-5"><input style="background-color:darkturquoise;font-size:15px" type="button" value="PRINT REPORT"
          onclick="printDiv()"></div>
      </div>
  </div>

  <div class="containe">{% block content %}{% endblock %}</div>

  <!-- datatables -->
  <script src="https://code.jquery.com/jquery-3.6.0.js" integrity="sha256-H+K7U5CnXl1h5ywQfKtSj8PCmoN9aaq30gDh27Xc0jk="
    crossorigin="anonymous"></script>
  <script src="https://cdn.datatables.net/1.10.24/js/jquery.dataTables.min.js"></script>
  <!--script>
    $(document).ready(function () {
      $("#myTable").DataTable();
    });
  </script-->

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.0.0-beta2/dist/js/bootstrap.bundle.min.js"
    integrity="sha384-b5kHyXgcpbZJO/tY9Ul7kGkf1S0CWuKcCD38l8YkeH8z8QjE0GmW1gYU5S9FOnJ0"
    crossorigin="anonymous"></script>
</body>

</html>  
  
  
  
  
  
  
  
  
  
  
  
